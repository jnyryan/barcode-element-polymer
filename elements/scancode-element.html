<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<script type="text/javascript" src="../bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="../lib/jquery-barcode-2.0.3/jquery-barcode.min.js"></script>
<script type="text/javascript" src="../lib/qrcode.js"></script>

<polymer-element name="scan-code" attributes="data type format width height">
  <template>
    <div id="scancode"></div>
  </template>

  <script>
  Polymer({

    ready: function(){
    },

    typeChanged: function () {
        this.generate();
    },

    dataChanged: function () {
        this.generate();
    },

    heightChanged: function () {
        this.generate();
    },

    widthChanged: function () {
        this.generate();
    },

    generate : function(){
      if (this.type === 'barcode') {
          this.generateBarcode();
      }
      else {
          this.generateQRcode()
      }
    },

    generateQRcode: function(){
      var el = this.$.scancode;
      el.innerHTML = "";
      var qrcode = new QRCode(el, {
          text: this.data,
          width: this.width,
          height: this.height,
          colorDark : "#000000",
          colorLight : "#ffffff",
          correctLevel : QRCode.CorrectLevel.H
      });
    },

    generateBarcode: function(){
      var el = this.$.scancode;
      $(el).barcode(
        {code: this.data, crc:false},
        this.format,
        {barWidth:this.width, barHeight:this.height});
    }

  });
  </script>
</polymer-element>
